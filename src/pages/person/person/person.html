<!-- header -->
<ion-header>
  <ion-navbar color='ftx-theme'>
    <ion-buttons left>
      <button ion-button icon-only (click)="pushPage('SettingPage')">
        <ion-icon name="settings"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title center>我</ion-title>
    <ion-buttons right>
      <button ion-button icon-only (click)="pushPage('MessagePage')" class="message-btn">
        <ion-icon name="mail">
          <ion-badge class="message-badge" color="danger" *ngIf="messageCount>0">{{messageCount}}</ion-badge>
        </ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>
<!-- content -->
<ion-content>
  <ion-refresher (ionRefresh)="doRefresh($event)" pullMax="300">
    <ion-refresher-content
      pullingIcon="arrow-dropdown"
      pullingText="下拉刷新"
      refreshingSpinner="circles"
      refreshingText="加载中...">
    </ion-refresher-content>
  </ion-refresher>

  <ion-list class="profile-list">
    <ion-item (click)="pushPage('PersonDetailPage')">
      <ion-thumbnail item-start>
        <img src="{{user.avatar_url || web_url+'assets/imgs/icon.png'}}">
      </ion-thumbnail>
      <h2>
        <span ion-text [color]="user.is_vip?'danger':'dark'">{{user.nickname || '啬甩'}}</span>
        <i class="iconfont icon-vip-copy" ion-text [color]="user.is_vip?'danger':'gray'" (click)="goVipPage($event)"></i>
      </h2>
      <p>13729909281</p>
      <p>最后登录时间:{{user.signature || ''}}</p>
      <ion-note item-end>
        <ion-icon name="arrow-forward"></ion-icon>
      </ion-note>
    </ion-item>
  </ion-list>

  <ion-list>
    <ion-item (click)="pushPage('BankCardPage')">
      <ion-icon name="ios-card" item-start></ion-icon>
      银行卡
      <ion-note clear item-end>
        <strong ion-text > 1张 </strong>
        <ion-icon name="arrow-forward"></ion-icon>
      </ion-note>
    </ion-item>
    <ion-item (click)="pushPage('ChangePasswordPage')">
      <ion-icon name="ios-card" item-start></ion-icon>
      密码修改
      <ion-note clear item-end>
        <ion-icon name="arrow-forward"></ion-icon>
      </ion-note>
    </ion-item>
    <ion-item (click)="pushPage('RiskPage')">
      <ion-icon name="ios-card" item-start></ion-icon>
      风险偏好测试
      <ion-note clear item-end>
        <strong ion-text > 成长型 </strong>
        <ion-icon name="arrow-forward"></ion-icon>
      </ion-note>
    </ion-item>
    <ion-item (click)="pushPage('RefereePage')">
      <ion-icon name="ios-card" item-start></ion-icon>
      推荐人信息
      <ion-note clear item-end>
        <strong ion-text > daslfk</strong>
        <ion-icon name="arrow-forward"></ion-icon>
      </ion-note>
    </ion-item>
  </ion-list>

  <ion-list>
    <ion-item text-center (click)="doLogout()">
      <ion-note color='danger'>安全退出</ion-note>
    </ion-item>
  </ion-list>
</ion-content>
